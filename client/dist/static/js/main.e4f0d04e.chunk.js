(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{199:function(e,t,a){e.exports=a(363)},210:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},361:function(e,t,a){},363:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(68),l=a.n(c),o=a(33),u=a(47),i=a(16),s=a.n(i),p=a(22),m=a(18),d=a(44),f=a(56),h=a(383),b=a(379),E=a(380),g=a(97),v=Object(n.createContext)(null);function O(){return Object(n.useContext)(v)}function j(e){var t=e.toString();e instanceof Error||!e.message||(t=e.message),alert(t)}var y=a(106),w=a(373),k=a(374),S=a(382);a(210);function x(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=O().isAuthenticated,o=Object(n.useState)(!0),u=Object(m.a)(o,2),i=u[0],d=u[1];function h(){return S.a.get("recipes","/recipes")}return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,h();case 5:t=e.sent,c(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),j(e.t0);case 12:d(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]),r.a.createElement("div",{className:"Home"},l?r.a.createElement("div",{className:"recipes"},r.a.createElement(w.a,null,"Your Recipes"),r.a.createElement(k.a,null,!i&&function(e){return[{}].concat(e).map((function(e,t){return 0!==t?r.a.createElement(f.LinkContainer,{key:e.recipeId,to:"/recipes/".concat(e.recipeId)},r.a.createElement(y.a,{header:e.recipeName},console.log(e),"Created: "+new Date(e.createdAt).toLocaleString())):r.a.createElement(f.LinkContainer,{key:"new",to:"/recipes/new"},r.a.createElement(y.a,null,r.a.createElement("h4",null,r.a.createElement("b",null,"\uff0b")," Create a new recipe")))}))}(a))):r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Jupiter Recipes"),r.a.createElement("p",null,"A chrome extension for creating recipes using Jupiter products")))}var I=a(376),N=a(377),C=a(384),L=a(189),R=a(375),P=a(181);a(325);function q(e){var t=e.isLoading,a=e.className,n=void 0===a?"":a,c=e.disabled,l=void 0!==c&&c,o=Object(L.a)(e,["isLoading","className","disabled"]);return r.a.createElement(R.a,Object.assign({className:"".concat(n," LoaderButton"),disabled:l||t},o),t&&r.a.createElement(P.a,{glyph:"refresh",className:"spinning"}),o.children)}var D=a(84),A=a(108);function _(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2),r=a[0],c=a[1];return[r,function(e){c(Object(A.a)(Object(A.a)({},r),{},Object(D.a)({},e.target.id,e.target.value)))}]}a(326);function z(){var e=Object(d.k)(),t=O().userHasAuthenticated,a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],o=c[1],u=_({email:"",password:""}),i=Object(m.a)(u,2),f=i[0],h=i[1];function b(){return(b=Object(p.a)(s.a.mark((function a(n){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),o(!0),a.prev=2,a.next=5,g.a.signIn(f.email,f.password);case 5:t(!0),e.push("/"),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),j(a.t0),o(!1);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:function(e){return b.apply(this,arguments)}},r.a.createElement(I.a,{controlId:"email",bsSize:"large"},r.a.createElement(N.a,null,"Email"),r.a.createElement(C.a,{autoFocus:!0,type:"email",value:f.email,onChange:h})),r.a.createElement(I.a,{controlId:"password",bsSize:"large"},r.a.createElement(N.a,null,"Password"),r.a.createElement(C.a,{type:"password",value:f.password,onChange:h})),r.a.createElement(q,{block:!0,type:"submit",bsSize:"large",isLoading:l,disabled:!(f.email.length>0&&f.password.length>0)},"Login")))}var T=a(378);a(327);function J(){var e=_({email:"",password:"",confirmPassword:"",confirmationCode:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(d.k)(),o=Object(n.useState)(null),u=Object(m.a)(o,2),i=u[0],f=u[1],h=O().userHasAuthenticated,b=Object(n.useState)(!1),E=Object(m.a)(b,2),v=E[0],y=E[1];function w(e){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),e.prev=2,e.next=5,g.a.signUp({username:a.email,password:a.password});case 5:n=e.sent,y(!1),f(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),j(e.t0),y(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function S(e){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),e.prev=2,e.next=5,g.a.confirmSignUp(a.email,a.confirmationCode);case 5:return e.next=7,g.a.signIn(a.email,a.password);case 7:h(!0),l.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),j(e.t0),y(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Signup"},null===i?r.a.createElement("form",{onSubmit:w},r.a.createElement(I.a,{controlId:"email",bsSize:"large"},r.a.createElement(N.a,null,"Email"),r.a.createElement(C.a,{autoFocus:!0,type:"email",value:a.email,onChange:c})),r.a.createElement(I.a,{controlId:"password",bsSize:"large"},r.a.createElement(N.a,null,"Password"),r.a.createElement(C.a,{type:"password",value:a.password,onChange:c})),r.a.createElement(I.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(N.a,null,"Confirm Password"),r.a.createElement(C.a,{type:"password",onChange:c,value:a.confirmPassword})),r.a.createElement(q,{block:!0,type:"submit",bsSize:"large",isLoading:v,disabled:!(a.email.length>0&&a.password.length>0&&a.password===a.confirmPassword)},"Signup")):r.a.createElement("form",{onSubmit:S},r.a.createElement(I.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(N.a,null,"Confirmation Code"),r.a.createElement(C.a,{autoFocus:!0,type:"tel",onChange:c,value:a.confirmationCode}),r.a.createElement(T.a,null,"Please check your email for the code.")),r.a.createElement(q,{block:!0,type:"submit",bsSize:"large",isLoading:v,disabled:!(a.confirmationCode.length>0)},"Verify")))}var U=a(85),B=a(182),F=a.n(B),H={REGION:"us-east-1",URL:"https://zb9cbqszn5.execute-api.us-east-1.amazonaws.com/prod"},G={REGION:"us-east-1",USER_POOL_ID:"us-east-1_tEeNptpoh",APP_CLIENT_ID:"mjggrnnuh9271ct5956koce1b",IDENTITY_POOL_ID:"us-east-1:cd045f8a-c400-4c79-a41a-3392530bda34"};a(344);function Y(){var e=Object(d.k)(),t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),u=Object(m.a)(o,2),i=u[0],f=u[1],h=Object(n.useState)(""),b=Object(m.a)(h,2),E=b[0],g=b[1],v=Object(n.useState)({}),O=Object(m.a)(v,2),y=O[0],w=O[1],k=Object(n.useState)(!1),x=Object(m.a)(k,2),N=x[0],L=x[1];function R(){return(R=Object(p.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),L(!0),t.prev=2,t.next=5,P(c);case 5:e.push("/"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),j(t.t0),L(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}function P(e){return console.log("name: ",e),S.a.post("recipes","/recipes",{body:{name:e,content:i}})}function D(){return(D=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return'\n      query{\n        search(page:0, query: "'.concat(E,'"){\n          name\n        }\n      }\n    '),"https://graphql.jupiter.co/",e.next=4,F()({url:"https://graphql.jupiter.co/",method:"post",data:{query:'\n          query{\n            search(page:0, query: "'.concat(E,'"){\n              name\n              productId{\n                value\n              }\n            }\n          }\n        ')}}).then((function(e){w(e.data.data.search.slice(0,5))})).catch(console.error);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){""===E?w({}):function(){D.apply(this,arguments)}()}),[E]),r.a.createElement("div",{className:"NewRecipe"},r.a.createElement("form",{onSubmit:function(e){return R.apply(this,arguments)}},r.a.createElement("h4",null,"Recipe name:"),r.a.createElement(I.a,{controlId:"name"},r.a.createElement(C.a,{value:c,componentClass:"input",onChange:function(e){return l(e.target.value)}})),r.a.createElement("hr",null),r.a.createElement("h4",null,"Recipe Ingredients:"),(console.log(i.length),i.length>0?r.a.createElement("div",{className:"card"},i.map((function(e){return r.a.createElement("div",{key:e.productId},r.a.createElement("a",{href:"https://app.jupiter.co/product/".concat(e.productId),target:"_blank"},r.a.createElement("h6",{className:"card-text"},e.name)),r.a.createElement("label",{className:"card-text",for:"quantity"},"Quantity:"),r.a.createElement("input",{className:"quant-input",defaultValue:e.quantity,type:"number",id:"quantity",name:"quantity",min:"0",onChange:function(t){return function(e,t){var a=Object(U.a)(i),n=a.find((function(e){return e.name==t.name}));if(0===parseInt(e)&&window.confirm("Are you sure you want to remove this ingredient?")){var r=a.indexOf(n);a.splice(r,1)}else n.quantity=parseInt(e);console.log(a),f((function(e){return Object(U.a)(a)}))}(t.target.value,e)}}))}))):r.a.createElement("h5",null,"Your recipe has no ingredients - add some below!")),r.a.createElement("hr",null),r.a.createElement("h4",null,"Add ingredients:"),r.a.createElement(I.a,{controlId:"query"},r.a.createElement(C.a,{value:E,placeholder:"Search Jupiter Catalog",componentClass:"input",onChange:function(e){g(e.target.value)}})),function(){if(Object.keys(y).length&&y.length)return r.a.createElement("div",{className:"search-card"},y.map((function(e){return r.a.createElement("div",{key:e.productId.value},r.a.createElement("a",{href:"https://app.jupiter.co/product/".concat(e.productId.value),target:"_blank"},r.a.createElement("h6",{className:"card-text"},e.name)),r.a.createElement("button",{className:"add-button",onClick:function(t){return function(e,t,a){e.preventDefault(),console.log(i),g(""),w([]);var n={name:t,quantity:1,productId:a};f((function(e){return[].concat(Object(U.a)(e),[n])})),console.log(i)}(t,e.name,e.productId.value)}},"Add"))})))}(),r.a.createElement(q,{block:!0,type:"submit",bsSize:"large",bsStyle:"primary",isLoading:N,disabled:!function(){for(var e=0;e<i.length;e++)if(i[e].quantity<1)return!1;return c.length>0&&i.length>0}()},"Create Recipe")))}a(345);function W(){var e=Object(d.m)().id,t=Object(d.k)(),a=Object(n.useState)(null),c=Object(m.a)(a,2),l=c[0],o=c[1],u=Object(n.useState)(""),i=Object(m.a)(u,2),f=i[0],h=i[1],b=Object(n.useState)({}),E=Object(m.a)(b,2),g=E[0],v=E[1],O=Object(n.useState)(!1),y=Object(m.a)(O,2),w=y[0],k=y[1],x=Object(n.useState)(!1),N=Object(m.a)(x,2),L=N[0],R=N[1];function P(t){return console.log(t),S.a.put("recipes","/recipes/".concat(e),{body:{recipe:t}})}function D(){return(D=Object(p.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),k(!0),e.prev=2,e.next=5,P({recipeName:f,content:{}});case 5:t.push("/"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),j(e.t0),k(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function A(){return S.a.del("recipes","/recipes/".concat(e))}function _(){return(_=Object(p.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),window.confirm("Are you sure you want to delete this recipe?")){e.next=4;break}return e.abrupt("return");case 4:return R(!0),e.prev=5,e.next=8,A();case 8:t.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),j(e.t0),R(!1);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){function t(){return S.a.get("recipes","/recipes/".concat(e))}function a(){return(a=Object(p.a)(s.a.mark((function e(){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:a=e.sent,n=a.content,r=a.recipeName,h(r),o(a),v(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e]),r.a.createElement("div",{className:"Recipes"},l&&r.a.createElement("form",{onSubmit:function(e){return D.apply(this,arguments)}},r.a.createElement("h4",null,"Recipe Name:"),r.a.createElement(I.a,{controlId:"name"},r.a.createElement(C.a,{value:f,placeholder:"New recipe name",componentClass:"input",onChange:function(e){return h(e.target.value)}})),r.a.createElement("hr",null),r.a.createElement("h4",null,"Recipe Contents:"),(console.log(g.length),g.length>0?r.a.createElement("div",null,g.map((function(e){return r.a.createElement("div",{className:"card",key:e.productId},r.a.createElement("a",{href:"https://app.jupiter.co/product/".concat(e.productId),target:"_blank"},r.a.createElement("h6",{className:"card-text"},e.name)),r.a.createElement("h6",{className:"card-text"},"Quantity: ",e.quantity))}))):r.a.createElement("h5",null,"ERROR: Empty Recipe")),r.a.createElement("hr",null),r.a.createElement(q,{block:!0,type:"submit",bsSize:"large",bsStyle:"primary",isLoading:w,disabled:!1},"Save"),r.a.createElement(q,{block:!0,bsSize:"large",bsStyle:"danger",onClick:function(e){return _.apply(this,arguments)},isLoading:L},"Delete")))}a(346);function Q(){var e=Object(d.k)();return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Error 404: Page not found"),e.push("/"))}function V(){return r.a.createElement(d.g,null,r.a.createElement(d.d,{exact:!0,path:"/"},r.a.createElement(x,null)),r.a.createElement(d.d,{exact:!0,path:"/login"},r.a.createElement(z,null)),r.a.createElement(d.d,{exact:!0,path:"/signup"},r.a.createElement(J,null)),r.a.createElement(d.d,{exact:!0,path:"/recipes/new"},r.a.createElement(Y,null)),r.a.createElement(d.d,{exact:!0,path:"/recipes/:id"},r.a.createElement(W,null)),r.a.createElement(d.d,null,r.a.createElement(Q,null)))}a(347);var $=function(){var e=Object(d.k)(),t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(!0),i=Object(m.a)(u,2),O=i[0],y=i[1];function w(){return(w=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.currentSession();case 3:l(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&j(e.t0);case 9:y(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function k(){return(k=Object(p.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.signOut();case 2:l(!1),e.push("/login");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){w.apply(this,arguments)}()}),[]),!O&&r.a.createElement("div",{className:"App container"},r.a.createElement(h.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(h.a.Header,null,r.a.createElement(h.a.Brand,null,r.a.createElement(o.Link,{to:"/"},"Jupiter Recipes")),r.a.createElement(h.a.Toggle,null)),r.a.createElement(h.a.Collapse,null,r.a.createElement(b.a,{pullRight:!0},c?r.a.createElement(E.a,{onClick:function(){return k.apply(this,arguments)}},"Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.LinkContainer,{to:"/signup"},r.a.createElement(E.a,null,"Signup")),r.a.createElement(f.LinkContainer,{to:"/login"},r.a.createElement(E.a,null,"Login")))))),r.a.createElement(v.Provider,{value:{isAuthenticated:c,userHasAuthenticated:l}},r.a.createElement(V,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(381),M=a(188),X=a(187);a(361);u.a.configure({Auth:{mandatorySignIn:!0,region:G.REGION,userPoolId:G.USER_POOL_ID,identityPoolId:G.IDENTITY_POOL_ID,userPoolWebClientId:G.APP_CLIENT_ID},API:{endpoints:[{name:"recipes",endpoint:H.URL,region:H.REGION}]}});var Z=new M.a({link:"graphql.jupiter.co",cache:new X.a});l.a.render(r.a.createElement(K.a,{client:Z},r.a.createElement(o.BrowserRouter,null,r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);